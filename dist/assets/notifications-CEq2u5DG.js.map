{"version":3,"file":"notifications-CEq2u5DG.js","sources":["../../src/script/views/Admin/notifications.js"],"sourcesContent":["import { supabase } from \"../../utils/supabaseClient\";\r\nimport Navbar from \"./components/navbar\";\r\nimport { reset } from \"../../utils/reset\";\r\nimport toastr from \"../../utils/toastr\";\r\nimport { sendEmail } from \"../../utils/send-email\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst notifications = async () => {\r\n  reset(\"Notifications\");\r\n  const { html: navbarHtml, pageEvents: navbarEvents } = Navbar();\r\n\r\n  // Fetch notifications, invoices, and profiles\r\n  async function fetchAll() {\r\n    const [{ data: notifications }, { data: invoices }, { data: profiles }] = await Promise.all([\r\n      supabase.from(\"notifications\").select(\"*\").order(\"created_at\", { ascending: false }),\r\n      supabase.from(\"payments\").select(\"*\").order(\"created_at\", { ascending: false }),\r\n      supabase.from(\"profiles\").select(\"id, full_name, email, avatar_url\")\r\n    ]);\r\n    return { notifications: notifications || [], invoices: invoices || [], profiles: profiles || [] };\r\n  }\r\n\r\n  // Render notification list\r\n  function renderNotifications(notifications, profiles) {\r\n    return `\r\n      <div class=\"mb-8\">\r\n        <h2 class=\"text-2xl font-bold mb-4 text-white\">User Notifications</h2>\r\n        <div class=\"space-y-4\">\r\n          ${notifications.length ? notifications.map(n => {\r\n            const user = profiles.find(p => p.id === n.user_id) || {};\r\n            return `\r\n              <div class=\"bg-white rounded-lg shadow p-4 flex items-start gap-4\">\r\n                <img src=\"${user.avatar_url || '/src/images/avatar-default.png'}\" class=\"w-10 h-10 rounded-full\" alt=\"User\" />\r\n                <div class=\"flex-1\">\r\n                  <div class=\"flex justify-between items-center\">\r\n                    <span class=\"font-bold text-indigo-700\">${user.full_name || \"Unknown\"}</span>\r\n                    <span class=\"text-xs text-gray-400\">${dayjs(n.created_at).format(\"MMM D, HH:mm\")}</span>\r\n                  </div>\r\n                  <div class=\"font-semibold text-lg text-gray-800\">${n.title}</div>\r\n                  <div class=\"text-gray-600 mb-2\">${n.message}</div>\r\n                  <div class=\"flex gap-2\">\r\n                    <button class=\"editNotifBtn px-3 py-1 rounded bg-yellow-500 text-white text-xs\" data-id=\"${n.id}\">Edit</button>\r\n                    <button class=\"deleteNotifBtn px-3 py-1 rounded bg-red-500 text-white text-xs\" data-id=\"${n.id}\">Delete</button>\r\n                    <button class=\"emailNotifBtn px-3 py-1 rounded bg-blue-600 text-white text-xs\" data-id=\"${n.id}\" data-email=\"${user.email}\">Send Email</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            `;\r\n          }).join(\"\") : `<div class=\"text-gray-400\">No notifications found.</div>`}\r\n        </div>\r\n      </div>\r\n      <div class=\"mb-8\">\r\n        <h2 class=\"text-xl font-bold mb-4 text-white\">Send Direct Message to User</h2>\r\n        <form id=\"adminSendEmailForm\" class=\"flex flex-col md:flex-row gap-4 items-center\">\r\n          <select id=\"adminUserSelect\" class=\"input input-bordered py-2 px-4 rounded-lg\" required>\r\n            <option value=\"\">Select User</option>\r\n            ${profiles.map(u => `<option value=\"${u.email}\">${u.full_name || u.email}</option>`).join(\"\")}\r\n          </select>\r\n          <input type=\"text\" id=\"adminEmailTitle\" placeholder=\"Subject\" class=\"input input-bordered py-2 px-4 rounded-lg\" required />\r\n          <input type=\"text\" id=\"adminEmailMessage\" placeholder=\"Message\" class=\"input input-bordered py-2 px-4 rounded-lg\" required />\r\n          <button type=\"submit\" class=\"btn btn-primary py-2 px-6 font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-white\">Send</button>\r\n        </form>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Render invoices/receipts\r\n  function renderInvoices(invoices, profiles) {\r\n    return `\r\n      <div class=\"mb-8\">\r\n        <h2 class=\"text-2xl font-bold mb-4 text-white\">Invoices & Receipts</h2>\r\n        <div class=\"space-y-4\">\r\n          ${invoices.length ? invoices.map(inv => {\r\n            const user = profiles.find(p => p.id === inv.user_id) || {};\r\n            return `\r\n              <div class=\"bg-white rounded-lg shadow p-4 flex items-start gap-4\">\r\n                <img src=\"${user.avatar_url || '/src/images/avatar-default.png'}\" class=\"w-10 h-10 rounded-full\" alt=\"User\" />\r\n                <div class=\"flex-1\">\r\n                  <div class=\"flex justify-between items-center\">\r\n                    <span class=\"font-bold text-indigo-700\">${user.full_name || \"Unknown\"}</span>\r\n                    <span class=\"text-xs text-gray-400\">${dayjs(inv.created_at).format(\"MMM D, YYYY\")}</span>\r\n                  </div>\r\n                  <div class=\"font-semibold text-lg text-gray-800\">Invoice #${inv.id}</div>\r\n                  <div class=\"text-gray-600 mb-2\">Amount: $${inv.amount} | Status: ${inv.status} | Method: ${inv.method}</div>\r\n                  <div class=\"flex gap-2\">\r\n                    <button class=\"viewInvoiceBtn px-3 py-1 rounded bg-green-600 text-white text-xs\" data-id=\"${inv.id}\">View</button>\r\n                    <button class=\"emailInvoiceBtn px-3 py-1 rounded bg-blue-600 text-white text-xs\" data-id=\"${inv.id}\" data-email=\"${user.email}\">Resend Receipt</button>\r\n                    <button class=\"downloadInvoiceBtn px-3 py-1 rounded bg-indigo-600 text-white text-xs\" data-id=\"${inv.id}\">Download</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            `;\r\n          }).join(\"\") : `<div class=\"text-gray-400\">No invoices found.</div>`}\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  // Render main UI\r\n  async function renderMain() {\r\n    const { notifications, invoices, profiles } = await fetchAll();\r\n    const html = `\r\n      <div class=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900 flex\">\r\n        ${navbarHtml}\r\n        <div class=\"flex-1 ml-0 sm:ml-64 h-screen overflow-y-auto transition-all duration-300\">\r\n          <main class=\"p-4 md:p-8 max-w-5xl mx-auto animate-fadeIn\">\r\n            ${renderNotifications(notifications, profiles)}\r\n            ${renderInvoices(invoices, profiles)}\r\n          </main>\r\n        </div>\r\n      </div>\r\n    `;\r\n    document.querySelector(\"#app\").innerHTML = html;\r\n    mainEvents(notifications, invoices, profiles);\r\n  }\r\n\r\n  // Edit notification modal\r\n  function showEditModal(notif) {\r\n    const modalHtml = `\r\n      <div id=\"editNotifModal\" class=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50\">\r\n        <div class=\"bg-white rounded-xl p-8 w-full max-w-md shadow-lg relative animate-slideIn\">\r\n          <button id=\"closeEditNotifModalBtn\" class=\"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-xl\">×</button>\r\n          <h2 class=\"text-2xl font-bold mb-4 text-gray-800\">Edit Notification</h2>\r\n          <form id=\"editNotifForm\" class=\"space-y-4\">\r\n            <input type=\"text\" name=\"title\" value=\"${notif.title}\" placeholder=\"Title\" class=\"input input-bordered w-full py-2 px-4 rounded-lg\" required />\r\n            <textarea name=\"message\" placeholder=\"Message\" class=\"input input-bordered w-full py-2 px-4 rounded-lg\" required>${notif.message}</textarea>\r\n            <button type=\"submit\" class=\"btn btn-primary w-full py-2 font-bold bg-gradient-to-r from-yellow-500 to-yellow-700 text-white\">Update</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    `;\r\n    document.body.insertAdjacentHTML(\"beforeend\", modalHtml);\r\n    document.getElementById(\"closeEditNotifModalBtn\")?.addEventListener(\"click\", () => {\r\n      document.getElementById(\"editNotifModal\")?.remove();\r\n    });\r\n    document.getElementById(\"editNotifForm\")?.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n      const form = e.target;\r\n      const title = form.title.value.trim();\r\n      const message = form.message.value.trim();\r\n      await supabase.from(\"notifications\").update({ title, message }).eq(\"id\", notif.id);\r\n      toastr.success(\"Notification updated!\");\r\n      document.getElementById(\"editNotifModal\")?.remove();\r\n      renderMain();\r\n    });\r\n  }\r\n\r\n  // View invoice modal\r\n  function showInvoiceModal(invoice, user) {\r\n    const modalHtml = `\r\n      <div id=\"viewInvoiceModal\" class=\"fixed inset-0 bg-black/60 flex items-center justify-center z-50\">\r\n        <div class=\"bg-white rounded-xl p-8 w-full max-w-lg shadow-lg relative animate-slideIn\">\r\n          <button id=\"closeViewInvoiceModalBtn\" class=\"absolute top-4 right-4 text-gray-500 hover:text-red-500 text-xl\">×</button>\r\n          <h2 class=\"text-2xl font-bold mb-4 text-gray-800\">Invoice Details</h2>\r\n          <div class=\"mb-4\">\r\n            <strong>Invoice #${invoice.id}</strong><br/>\r\n            <strong>User:</strong> ${user.full_name || \"Unknown\"}<br/>\r\n            <strong>Email:</strong> ${user.email || \"N/A\"}<br/>\r\n            <strong>Amount:</strong> $${invoice.amount}<br/>\r\n            <strong>Status:</strong> ${invoice.status}<br/>\r\n            <strong>Method:</strong> ${invoice.method}<br/>\r\n            <strong>Date:</strong> ${dayjs(invoice.created_at).format(\"MMM D, YYYY\")}\r\n          </div>\r\n          <button id=\"downloadInvoiceBtnModal\" class=\"btn btn-primary w-full py-2 font-bold bg-gradient-to-r from-indigo-600 to-indigo-700 text-white\">Download Invoice</button>\r\n        </div>\r\n      </div>\r\n    `;\r\n    document.body.insertAdjacentHTML(\"beforeend\", modalHtml);\r\n    document.getElementById(\"closeViewInvoiceModalBtn\")?.addEventListener(\"click\", () => {\r\n      document.getElementById(\"viewInvoiceModal\")?.remove();\r\n    });\r\n    document.getElementById(\"downloadInvoiceBtnModal\")?.addEventListener(\"click\", () => {\r\n      exportInvoice(invoice, user);\r\n    });\r\n  }\r\n\r\n  // Export/download invoice as PDF (simple HTML to PDF)\r\n  function exportInvoice(invoice, user) {\r\n    const html = `\r\n      <html>\r\n      <head>\r\n        <title>Invoice #${invoice.id}</title>\r\n        <style>\r\n          body { font-family: Arial, sans-serif; padding: 2em; }\r\n          .header { font-size: 2em; font-weight: bold; margin-bottom: 1em; }\r\n          .section { margin-bottom: 1em; }\r\n        </style>\r\n      </head>\r\n      <body>\r\n        <div class=\"header\">Swift Edge Logistics - Invoice</div>\r\n        <div class=\"section\"><strong>Invoice #:</strong> ${invoice.id}</div>\r\n        <div class=\"section\"><strong>User:</strong> ${user.full_name || \"Unknown\"}</div>\r\n        <div class=\"section\"><strong>Email:</strong> ${user.email || \"N/A\"}</div>\r\n        <div class=\"section\"><strong>Amount:</strong> $${invoice.amount}</div>\r\n        <div class=\"section\"><strong>Status:</strong> ${invoice.status}</div>\r\n        <div class=\"section\"><strong>Method:</strong> ${invoice.method}</div>\r\n        <div class=\"section\"><strong>Date:</strong> ${dayjs(invoice.created_at).format(\"MMM D, YYYY\")}</div>\r\n      </body>\r\n      </html>\r\n    `;\r\n    const blob = new Blob([html], { type: \"text/html\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `Invoice_${invoice.id}.html`;\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    setTimeout(() => {\r\n      a.remove();\r\n      URL.revokeObjectURL(url);\r\n    }, 1000);\r\n  }\r\n\r\n  // Send email to user\r\n  async function sendNotificationEmail(email, title, message) {\r\n    try {\r\n      await sendEmail({\r\n        to: email,\r\n        subject: title,\r\n        html: `<h2>${title}</h2><p>${message}</p>`\r\n      });\r\n      toastr.success(\"Email sent to user!\");\r\n    } catch (err) {\r\n      toastr.error(\"Failed to send email.\");\r\n    }\r\n  }\r\n\r\n  // Send invoice/receipt email\r\n  async function sendInvoiceEmail(email, invoice, user) {\r\n    try {\r\n      await sendEmail({\r\n        to: email,\r\n        subject: `Your Invoice from Swift Edge Logistics`,\r\n        html: `\r\n          <h2>Invoice #${invoice.id}</h2>\r\n          <p>Dear ${user.full_name || \"Customer\"},</p>\r\n          <p>Thank you for your payment. Here is your receipt:</p>\r\n          <ul>\r\n            <li><strong>Amount:</strong> $${invoice.amount}</li>\r\n            <li><strong>Status:</strong> ${invoice.status}</li>\r\n            <li><strong>Method:</strong> ${invoice.method}</li>\r\n            <li><strong>Date:</strong> ${dayjs(invoice.created_at).format(\"MMM D, YYYY\")}</li>\r\n          </ul>\r\n          <p>Swift Edge Logistics Team</p>\r\n        `\r\n      });\r\n      toastr.success(\"Receipt sent to customer!\");\r\n    } catch (err) {\r\n      toastr.error(\"Failed to send receipt.\");\r\n    }\r\n  }\r\n\r\n  // Main event handlers\r\n  function mainEvents(notifications, invoices, profiles) {\r\n    navbarEvents();\r\n\r\n    // Edit notification\r\n    document.querySelectorAll(\".editNotifBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", () => {\r\n        const notif = notifications.find(n => n.id === btn.dataset.id);\r\n        showEditModal(notif);\r\n      });\r\n    });\r\n\r\n    // Delete notification\r\n    document.querySelectorAll(\".deleteNotifBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", async () => {\r\n        await supabase.from(\"notifications\").delete().eq(\"id\", btn.dataset.id);\r\n        toastr.success(\"Notification deleted!\");\r\n        renderMain();\r\n      });\r\n    });\r\n\r\n    // Send notification email\r\n    document.querySelectorAll(\".emailNotifBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", async () => {\r\n        const notif = notifications.find(n => n.id === btn.dataset.id);\r\n        const user = profiles.find(p => p.id === notif.user_id);\r\n        if (user?.email) {\r\n          await sendNotificationEmail(user.email, notif.title, notif.message);\r\n        } else {\r\n          toastr.error(\"User email not found.\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // View invoice\r\n    document.querySelectorAll(\".viewInvoiceBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", () => {\r\n        const invoice = invoices.find(i => i.id === btn.dataset.id);\r\n        const user = profiles.find(p => p.id === invoice.user_id) || {};\r\n        showInvoiceModal(invoice, user);\r\n      });\r\n    });\r\n\r\n    // Resend invoice/receipt\r\n    document.querySelectorAll(\".emailInvoiceBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", async () => {\r\n        const invoice = invoices.find(i => i.id === btn.dataset.id);\r\n        const user = profiles.find(p => p.id === invoice.user_id) || {};\r\n        if (user?.email) {\r\n          await sendInvoiceEmail(user.email, invoice, user);\r\n        } else {\r\n          toastr.error(\"User email not found.\");\r\n        }\r\n      });\r\n    });\r\n\r\n    // Download invoice\r\n    document.querySelectorAll(\".downloadInvoiceBtn\").forEach(btn => {\r\n      btn.addEventListener(\"click\", () => {\r\n        const invoice = invoices.find(i => i.id === btn.dataset.id);\r\n        const user = profiles.find(p => p.id === invoice.user_id) || {};\r\n        exportInvoice(invoice, user);\r\n      });\r\n    });\r\n\r\n    // Admin direct email form\r\n    document.getElementById(\"adminSendEmailForm\")?.addEventListener(\"submit\", async (e) => {\r\n      e.preventDefault();\r\n      const email = document.getElementById(\"adminUserSelect\").value;\r\n      const title = document.getElementById(\"adminEmailTitle\").value.trim();\r\n      const message = document.getElementById(\"adminEmailMessage\").value.trim();\r\n      if (!email || !title || !message) {\r\n        toastr.error(\"Please fill all fields.\");\r\n        return;\r\n      }\r\n      await sendNotificationEmail(email, title, message);\r\n      document.getElementById(\"adminEmailTitle\").value = \"\";\r\n      document.getElementById(\"adminEmailMessage\").value = \"\";\r\n    });\r\n  }\r\n\r\n  return { html: \"\", pageEvents: async () => await renderMain() }\r\n};\r\n\r\nexport default notifications;"],"names":["notifications","reset","navbarHtml","navbarEvents","Navbar","fetchAll","invoices","profiles","supabase","renderNotifications","n","user","p","dayjs","u","renderInvoices","inv","renderMain","html","mainEvents","showEditModal","notif","modalHtml","e","form","title","message","toastr","showInvoiceModal","invoice","exportInvoice","blob","url","a","sendNotificationEmail","email","sendEmail","sendInvoiceEmail","btn","i"],"mappings":"+VAOK,MAACA,EAAgB,SAAY,CAChCC,EAAM,eAAe,EACrB,KAAM,CAAE,KAAMC,EAAY,WAAYC,CAAY,EAAKC,IAGvD,eAAeC,GAAW,CACxB,KAAM,CAAC,CAAE,KAAML,CAAa,EAAI,CAAE,KAAMM,GAAY,CAAE,KAAMC,CAAQ,CAAE,EAAI,MAAM,QAAQ,IAAI,CAC1FC,EAAS,KAAK,eAAe,EAAE,OAAO,GAAG,EAAE,MAAM,aAAc,CAAE,UAAW,EAAK,CAAE,EACnFA,EAAS,KAAK,UAAU,EAAE,OAAO,GAAG,EAAE,MAAM,aAAc,CAAE,UAAW,EAAK,CAAE,EAC9EA,EAAS,KAAK,UAAU,EAAE,OAAO,kCAAkC,CACzE,CAAK,EACD,MAAO,CAAE,cAAeR,GAAiB,CAAA,EAAI,SAAUM,GAAY,CAAA,EAAI,SAAUC,GAAY,CAAA,EAC/F,CAGA,SAASE,EAAoBT,EAAeO,EAAU,CACpD,MAAO;AAAA;AAAA;AAAA;AAAA,YAICP,EAAc,OAASA,EAAc,IAAIU,GAAK,CAC9C,MAAMC,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOF,EAAE,OAAO,GAAK,GACvD,MAAO;AAAA;AAAA,4BAESC,EAAK,YAAc,gCAAgC;AAAA;AAAA;AAAA,8DAGjBA,EAAK,WAAa,SAAS;AAAA,0DAC/BE,EAAMH,EAAE,UAAU,EAAE,OAAO,cAAc,CAAC;AAAA;AAAA,qEAE/BA,EAAE,KAAK;AAAA,oDACxBA,EAAE,OAAO;AAAA;AAAA,+GAEkDA,EAAE,EAAE;AAAA,8GACLA,EAAE,EAAE;AAAA,8GACJA,EAAE,EAAE,iBAAiBC,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,aAKnI,CAAC,EAAE,KAAK,EAAE,EAAI,0DAA0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAQpEJ,EAAS,IAAIO,GAAK,kBAAkBA,EAAE,KAAK,KAAKA,EAAE,WAAaA,EAAE,KAAK,WAAW,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQvG,CAGA,SAASC,EAAeT,EAAUC,EAAU,CAC1C,MAAO;AAAA;AAAA;AAAA;AAAA,YAICD,EAAS,OAASA,EAAS,IAAIU,GAAO,CACtC,MAAML,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOI,EAAI,OAAO,GAAK,GACzD,MAAO;AAAA;AAAA,4BAESL,EAAK,YAAc,gCAAgC;AAAA;AAAA;AAAA,8DAGjBA,EAAK,WAAa,SAAS;AAAA,0DAC/BE,EAAMG,EAAI,UAAU,EAAE,OAAO,aAAa,CAAC;AAAA;AAAA,8EAEvBA,EAAI,EAAE;AAAA,6DACvBA,EAAI,MAAM,cAAcA,EAAI,MAAM,cAAcA,EAAI,MAAM;AAAA;AAAA,gHAEPA,EAAI,EAAE;AAAA,gHACNA,EAAI,EAAE,iBAAiBL,EAAK,KAAK;AAAA,qHAC5BK,EAAI,EAAE;AAAA;AAAA;AAAA;AAAA,aAKjH,CAAC,EAAE,KAAK,EAAE,EAAI,qDAAqD;AAAA;AAAA;AAAA,KAI3E,CAGA,eAAeC,GAAa,CAC1B,KAAM,CAAE,cAAAjB,EAAe,SAAAM,EAAU,SAAAC,CAAQ,EAAK,MAAMF,EAAQ,EACtDa,EAAO;AAAA;AAAA,UAEPhB,CAAU;AAAA;AAAA;AAAA,cAGNO,EAAoBT,EAAeO,CAAQ,CAAC;AAAA,cAC5CQ,EAAeT,EAAUC,CAAQ,CAAC;AAAA;AAAA;AAAA;AAAA,MAK5C,SAAS,cAAc,MAAM,EAAE,UAAYW,EAC3CC,EAAWnB,EAAeM,EAAUC,CAAQ,CAC9C,CAGA,SAASa,EAAcC,EAAO,CAC5B,MAAMC,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAM+BD,EAAM,KAAK;AAAA,+HAC+DA,EAAM,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,MAMxI,SAAS,KAAK,mBAAmB,YAAaC,CAAS,EACvD,SAAS,eAAe,wBAAwB,GAAG,iBAAiB,QAAS,IAAM,CACjF,SAAS,eAAe,gBAAgB,GAAG,OAAM,CACnD,CAAC,EACD,SAAS,eAAe,eAAe,GAAG,iBAAiB,SAAU,MAAOC,GAAM,CAChFA,EAAE,eAAc,EAChB,MAAMC,EAAOD,EAAE,OACTE,EAAQD,EAAK,MAAM,MAAM,KAAI,EAC7BE,EAAUF,EAAK,QAAQ,MAAM,KAAI,EACvC,MAAMhB,EAAS,KAAK,eAAe,EAAE,OAAO,CAAE,MAAAiB,EAAO,QAAAC,CAAO,CAAE,EAAE,GAAG,KAAML,EAAM,EAAE,EACjFM,EAAO,QAAQ,uBAAuB,EACtC,SAAS,eAAe,gBAAgB,GAAG,OAAM,EACjDV,GACF,CAAC,CACH,CAGA,SAASW,EAAiBC,EAASlB,EAAM,CACvC,MAAMW,EAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BAMSO,EAAQ,EAAE;AAAA,qCACJlB,EAAK,WAAa,SAAS;AAAA,sCAC1BA,EAAK,OAAS,KAAK;AAAA,wCACjBkB,EAAQ,MAAM;AAAA,uCACfA,EAAQ,MAAM;AAAA,uCACdA,EAAQ,MAAM;AAAA,qCAChBhB,EAAMgB,EAAQ,UAAU,EAAE,OAAO,aAAa,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,MAMhF,SAAS,KAAK,mBAAmB,YAAaP,CAAS,EACvD,SAAS,eAAe,0BAA0B,GAAG,iBAAiB,QAAS,IAAM,CACnF,SAAS,eAAe,kBAAkB,GAAG,OAAM,CACrD,CAAC,EACD,SAAS,eAAe,yBAAyB,GAAG,iBAAiB,QAAS,IAAM,CAClFQ,EAAcD,EAASlB,CAAI,CAC7B,CAAC,CACH,CAGA,SAASmB,EAAcD,EAASlB,EAAM,CACpC,MAAMO,EAAO;AAAA;AAAA;AAAA,0BAGSW,EAAQ,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DASuBA,EAAQ,EAAE;AAAA,sDACflB,EAAK,WAAa,SAAS;AAAA,uDAC1BA,EAAK,OAAS,KAAK;AAAA,yDACjBkB,EAAQ,MAAM;AAAA,wDACfA,EAAQ,MAAM;AAAA,wDACdA,EAAQ,MAAM;AAAA,sDAChBhB,EAAMgB,EAAQ,UAAU,EAAE,OAAO,aAAa,CAAC;AAAA;AAAA;AAAA,MAI3FE,EAAO,IAAI,KAAK,CAACb,CAAI,EAAG,CAAE,KAAM,WAAW,CAAE,EAC7Cc,EAAM,IAAI,gBAAgBD,CAAI,EAC9BE,EAAI,SAAS,cAAc,GAAG,EACpCA,EAAE,KAAOD,EACTC,EAAE,SAAW,WAAWJ,EAAQ,EAAE,QAClC,SAAS,KAAK,YAAYI,CAAC,EAC3BA,EAAE,MAAK,EACP,WAAW,IAAM,CACfA,EAAE,OAAM,EACR,IAAI,gBAAgBD,CAAG,CACzB,EAAG,GAAI,CACT,CAGA,eAAeE,EAAsBC,EAAOV,EAAOC,EAAS,CAC1D,GAAI,CACF,MAAMU,EAAU,CACd,GAAID,EACJ,QAASV,EACT,KAAM,OAAOA,CAAK,WAAWC,CAAO,MAC5C,CAAO,EACDC,EAAO,QAAQ,qBAAqB,CACtC,MAAc,CACZA,EAAO,MAAM,uBAAuB,CACtC,CACF,CAGA,eAAeU,EAAiBF,EAAON,EAASlB,EAAM,CACpD,GAAI,CACF,MAAMyB,EAAU,CACd,GAAID,EACJ,QAAS,yCACT,KAAM;AAAA,yBACWN,EAAQ,EAAE;AAAA,oBACflB,EAAK,WAAa,UAAU;AAAA;AAAA;AAAA,4CAGJkB,EAAQ,MAAM;AAAA,2CACfA,EAAQ,MAAM;AAAA,2CACdA,EAAQ,MAAM;AAAA,yCAChBhB,EAAMgB,EAAQ,UAAU,EAAE,OAAO,aAAa,CAAC;AAAA;AAAA;AAAA,SAIxF,CAAO,EACDF,EAAO,QAAQ,2BAA2B,CAC5C,MAAc,CACZA,EAAO,MAAM,yBAAyB,CACxC,CACF,CAGA,SAASR,EAAWnB,EAAeM,EAAUC,EAAU,CACrDJ,IAGA,SAAS,iBAAiB,eAAe,EAAE,QAAQmC,GAAO,CACxDA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMjB,EAAQrB,EAAc,KAAK,GAAK,EAAE,KAAOsC,EAAI,QAAQ,EAAE,EAC7DlB,EAAcC,CAAK,CACrB,CAAC,CACH,CAAC,EAGD,SAAS,iBAAiB,iBAAiB,EAAE,QAAQiB,GAAO,CAC1DA,EAAI,iBAAiB,QAAS,SAAY,CACxC,MAAM9B,EAAS,KAAK,eAAe,EAAE,OAAM,EAAG,GAAG,KAAM8B,EAAI,QAAQ,EAAE,EACrEX,EAAO,QAAQ,uBAAuB,EACtCV,GACF,CAAC,CACH,CAAC,EAGD,SAAS,iBAAiB,gBAAgB,EAAE,QAAQqB,GAAO,CACzDA,EAAI,iBAAiB,QAAS,SAAY,CACxC,MAAMjB,EAAQrB,EAAc,KAAKU,GAAKA,EAAE,KAAO4B,EAAI,QAAQ,EAAE,EACvD3B,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOS,EAAM,OAAO,EAClDV,GAAM,MACR,MAAMuB,EAAsBvB,EAAK,MAAOU,EAAM,MAAOA,EAAM,OAAO,EAElEM,EAAO,MAAM,uBAAuB,CAExC,CAAC,CACH,CAAC,EAGD,SAAS,iBAAiB,iBAAiB,EAAE,QAAQW,GAAO,CAC1DA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMT,EAAUvB,EAAS,KAAKiC,GAAKA,EAAE,KAAOD,EAAI,QAAQ,EAAE,EACpD3B,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOiB,EAAQ,OAAO,GAAK,GAC7DD,EAAiBC,EAASlB,CAAI,CAChC,CAAC,CACH,CAAC,EAGD,SAAS,iBAAiB,kBAAkB,EAAE,QAAQ2B,GAAO,CAC3DA,EAAI,iBAAiB,QAAS,SAAY,CACxC,MAAMT,EAAUvB,EAAS,KAAKiC,GAAKA,EAAE,KAAOD,EAAI,QAAQ,EAAE,EACpD3B,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOiB,EAAQ,OAAO,GAAK,GACzDlB,GAAM,MACR,MAAM0B,EAAiB1B,EAAK,MAAOkB,EAASlB,CAAI,EAEhDgB,EAAO,MAAM,uBAAuB,CAExC,CAAC,CACH,CAAC,EAGD,SAAS,iBAAiB,qBAAqB,EAAE,QAAQW,GAAO,CAC9DA,EAAI,iBAAiB,QAAS,IAAM,CAClC,MAAMT,EAAUvB,EAAS,KAAKiC,GAAKA,EAAE,KAAOD,EAAI,QAAQ,EAAE,EACpD3B,EAAOJ,EAAS,KAAKK,GAAKA,EAAE,KAAOiB,EAAQ,OAAO,GAAK,GAC7DC,EAAcD,EAASlB,CAAI,CAC7B,CAAC,CACH,CAAC,EAGD,SAAS,eAAe,oBAAoB,GAAG,iBAAiB,SAAU,MAAOY,GAAM,CACrFA,EAAE,eAAc,EAChB,MAAMY,EAAQ,SAAS,eAAe,iBAAiB,EAAE,MACnDV,EAAQ,SAAS,eAAe,iBAAiB,EAAE,MAAM,OACzDC,EAAU,SAAS,eAAe,mBAAmB,EAAE,MAAM,OACnE,GAAI,CAACS,GAAS,CAACV,GAAS,CAACC,EAAS,CAChCC,EAAO,MAAM,yBAAyB,EACtC,MACF,CACA,MAAMO,EAAsBC,EAAOV,EAAOC,CAAO,EACjD,SAAS,eAAe,iBAAiB,EAAE,MAAQ,GACnD,SAAS,eAAe,mBAAmB,EAAE,MAAQ,EACvD,CAAC,CACH,CAEA,MAAO,CAAE,KAAM,GAAI,WAAY,SAAY,MAAMT,EAAU,CAAE,CAC/D"}